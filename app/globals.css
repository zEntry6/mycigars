@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   PAPER CARD - Physical Material Realism
   A sheet of paper resting on a desk
   ============================================ */

@layer components {
  /* --- BASE PAPER CARD --- */
  .paper-card {
    position: relative;
    cursor: pointer;
    
    /* Paper color - warm off-white, not stark */
    background: 
      /* Subtle vignette - darker toward edges */
      radial-gradient(
        ellipse 80% 70% at 50% 40%,
        #faf8f4 0%,
        #f6f3ed 60%,
        #f0ece4 100%
      );
    
    /* Imperfect edges - slightly uneven border */
    border: none;
    border-radius: 1px;
    
    /* Layered shadow system for physical depth:
       1. Contact shadow - where paper meets desk
       2. Ambient shadow - soft diffuse light
       3. Lift shadow - slight unevenness */
    box-shadow: 
      /* Contact shadow - tight, dark, asymmetric */
      0 1px 1px rgba(0, 0, 0, 0.08),
      1px 2px 2px rgba(0, 0, 0, 0.06),
      /* Ambient shadow - soft, wide */
      0 4px 12px rgba(0, 0, 0, 0.04),
      -2px 6px 16px rgba(0, 0, 0, 0.03),
      /* Paper edge definition */
      inset 0 0 0 1px rgba(0, 0, 0, 0.04);
    
    /* Smooth but restrained transition */
    transition: 
      transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94),
      box-shadow 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Hover state - minimal lift, literary restraint */
  .paper-card:hover {
    transform: translateY(-2px) rotate(-0.15deg);
    box-shadow: 
      /* Contact shadow lifts slightly */
      0 2px 2px rgba(0, 0, 0, 0.06),
      2px 4px 4px rgba(0, 0, 0, 0.05),
      /* Ambient shadow deepens and spreads */
      0 8px 20px rgba(0, 0, 0, 0.06),
      -3px 12px 28px rgba(0, 0, 0, 0.04),
      /* Edge remains */
      inset 0 0 0 1px rgba(0, 0, 0, 0.04);
  }

  /* --- EDGE VIGNETTE ---
     Darkens edges subtly for organic feel */
  .paper-edge-vignette {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    border-radius: inherit;
    /* Soft inner shadow on all edges */
    box-shadow: 
      inset 0 0 30px rgba(0, 0, 0, 0.02),
      inset 0 0 60px rgba(0, 0, 0, 0.01);
  }

  /* --- PAPER TEXTURE --- 
     Concentrated at edges, calm in center
     Imperfect, not uniform */
  .paper-texture {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    border-radius: inherit;
    
    /* Noise texture - very subtle */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 300 300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='grain'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23grain)'/%3E%3C/svg%3E");
    
    /* Mask: texture visible at edges, fades to center */
    -webkit-mask-image: radial-gradient(
      ellipse 70% 60% at 50% 50%,
      transparent 0%,
      transparent 30%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0.6) 100%
    );
    mask-image: radial-gradient(
      ellipse 70% 60% at 50% 50%,
      transparent 0%,
      transparent 30%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0.6) 100%
    );
    
    opacity: 0.25;
    mix-blend-mode: multiply;
  }

  /* --- FOLDED CORNER ---
     Readable, suggests paper thickness
     Bottom-right, clear but not cartoonish */
  .paper-fold {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 32px;
    height: 32px;
    z-index: 6;
    pointer-events: none;
    
    /* Fold triangle with gradient for thickness illusion */
    background: 
      /* Crease line - sharper definition */
      linear-gradient(
        135deg,
        transparent 48%,
        rgba(0, 0, 0, 0.08) 49%,
        rgba(0, 0, 0, 0.03) 51%,
        transparent 52%
      ),
      /* Fold face - shows underside of paper */
      linear-gradient(
        135deg,
        transparent 50%,
        #e8e4db 50%,
        #ddd9cf 70%,
        #d5d0c5 100%
      );
  }

  /* Shadow cast by the fold onto the paper */
  .paper-fold-shadow {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 40px;
    height: 40px;
    z-index: 5;
    pointer-events: none;
    
    /* Soft shadow suggesting paper curling */
    background: 
      radial-gradient(
        ellipse 100% 100% at 100% 100%,
        rgba(0, 0, 0, 0.1) 0%,
        rgba(0, 0, 0, 0.04) 40%,
        transparent 70%
      );
  }

  /* Hover - fold stays static (no animation) */
  .paper-card:hover .paper-fold,
  .paper-card:hover .paper-fold-shadow {
    /* Intentionally empty - fold does not animate */
  }

  /* ============================================
     ARTICLE PAGE - Continuous Paper Sheet
     A single long sheet for reading essays
     ============================================ */

  /* The paper itself */
  .article-paper {
    position: relative;
    max-width: 720px;
    margin: 0 auto;
    padding: 2.5rem 2rem 3.5rem;
    
    /* Paper background - clean, warm white */
    background: 
      linear-gradient(
        180deg,
        #faf9f6 0%,
        #f8f6f2 100%
      );
    
    /* Soft shadow - paper resting on desk */
    box-shadow: 
      0 1px 2px rgba(0, 0, 0, 0.04),
      0 2px 4px rgba(0, 0, 0, 0.03),
      0 4px 16px rgba(0, 0, 0, 0.03),
      0 8px 32px rgba(0, 0, 0, 0.02);
    
    /* Minimal border radius for slight softness */
    border-radius: 1px;
    
    /* Prevent overflow of decorative elements */
    overflow: hidden;
  }

  @media (min-width: 640px) {
    .article-paper {
      padding: 3.5rem 3.5rem 4.5rem;
    }
  }

  @media (min-width: 768px) {
    .article-paper {
      padding: 4rem 5rem 5.5rem;
    }
  }

  /* --- HORIZONTAL FOLD CREASE ---
     Represents a paper once folded and flattened
     Extremely subtle, slightly uneven */
  .article-crease {
    position: absolute;
    top: 72px;
    left: 0;
    right: 0;
    height: 8px;
    pointer-events: none;
    z-index: 2;
    
    /* Multi-layer gradient for uneven, soft crease */
    background:
      /* Main crease shadow - very soft */
      linear-gradient(
        180deg,
        transparent 0%,
        rgba(0, 0, 0, 0.012) 30%,
        rgba(0, 0, 0, 0.018) 50%,
        rgba(0, 0, 0, 0.008) 70%,
        transparent 100%
      );
    
    /* Slight variation in opacity across width for unevenness */
    -webkit-mask-image: linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.6) 0%,
      rgba(0, 0, 0, 0.9) 20%,
      rgba(0, 0, 0, 1) 40%,
      rgba(0, 0, 0, 0.85) 60%,
      rgba(0, 0, 0, 0.95) 80%,
      rgba(0, 0, 0, 0.7) 100%
    );
    mask-image: linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.6) 0%,
      rgba(0, 0, 0, 0.9) 20%,
      rgba(0, 0, 0, 1) 40%,
      rgba(0, 0, 0, 0.85) 60%,
      rgba(0, 0, 0, 0.95) 80%,
      rgba(0, 0, 0, 0.7) 100%
    );
  }

  /* Crease highlight - slight lightening above the shadow */
  .article-crease::before {
    content: '';
    position: absolute;
    top: -2px;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(
      180deg,
      transparent 0%,
      rgba(255, 255, 255, 0.3) 50%,
      transparent 100%
    );
    opacity: 0.5;
  }

  @media (min-width: 640px) {
    .article-crease {
      top: 80px;
    }
  }

  @media (min-width: 768px) {
    .article-crease {
      top: 88px;
    }
  }

  /* Left edge shading - suggests thickness */
  .article-edge-left {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 40px;
    pointer-events: none;
    z-index: 1;
    background: linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.015) 0%,
      transparent 100%
    );
  }

  /* Right edge shading */
  .article-edge-right {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    width: 40px;
    pointer-events: none;
    z-index: 1;
    background: linear-gradient(
      270deg,
      rgba(0, 0, 0, 0.015) 0%,
      transparent 100%
    );
  }

  /* Very subtle paper texture - lighter than cards */
  .article-texture {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    opacity: 0.12;
    mix-blend-mode: multiply;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='grain'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.5' numOctaves='3' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23grain)'/%3E%3C/svg%3E");
  }

  /* ============================================
     ARTICLE HEADER - Title & Meta
     ============================================ */

  .article-header {
    margin-bottom: 36px;  /* 6-unit baseline */
  }

  @media (min-width: 640px) {
    .article-header {
      margin-bottom: 48px;  /* 8-unit baseline */
    }
  }

  .article-title {
    font-family: 'Georgia', serif;
    font-weight: 700;
    color: #1a1a1a;
    font-size: 1.625rem;
    line-height: 1.25;
    letter-spacing: -0.015em;
    max-width: 560px;
  }

  @media (min-width: 640px) {
    .article-title {
      font-size: 2rem;
      line-height: 1.2;
    }
  }

  @media (min-width: 768px) {
    .article-title {
      font-size: 2.25rem;
    }
  }

  /* ============================================
     INK-BLEED EFFECT - Subtle print impression
     Applied to large headings only
     ============================================ */

  .ink-bleed {
    /* 
     * Simulates ink spreading slightly into paper fibers
     * Three ultra-subtle layers:
     * 1. Tiny dark spread (ink absorption)
     * 2. Micro warm tone (paper reaction)
     * 3. Hairline definition
     */
    text-shadow:
      0 0 0.5px rgba(0, 0, 0, 0.15),
      0 0 1px rgba(30, 20, 10, 0.08),
      0 0.5px 0 rgba(0, 0, 0, 0.02);
  }

  /* Slightly stronger on larger screens where detail is visible */
  @media (min-width: 768px) {
    .ink-bleed {
      text-shadow:
        0 0 0.6px rgba(0, 0, 0, 0.18),
        0 0 1.2px rgba(30, 20, 10, 0.1),
        0 0.5px 0 rgba(0, 0, 0, 0.03);
    }
  }

  /* ============================================
     ARTICLE PROSE - Print Book Typography
     6px baseline grid for vertical rhythm
     ============================================ */

  .article-prose {
    /* 
     * BASELINE GRID: 6px base unit
     * All vertical spacing aligns to multiples of 6px
     * This creates invisible but felt consistency
     */
    --baseline: 6px;
    --line-height: 27px;  /* 4.5 baseline units */
    
    font-family: 'Georgia', 'Times New Roman', serif;
    font-size: 17px;
    line-height: var(--line-height);
    color: #2d2d2d;
    letter-spacing: 0.005em;
    
    /* Measure: ~65-70 characters per line */
    max-width: 36em;
    
    /* Typographic refinements */
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    hanging-punctuation: first last;
  }

  @media (min-width: 640px) {
    .article-prose {
      font-size: 18px;
      --line-height: 30px;  /* 5 baseline units */
      line-height: var(--line-height);
    }
  }

  /* --- FIRST PARAGRAPH ---
     Book-like opening with subtle drop cap
     Sets the tone for the entire piece */

  .article-prose > p:first-of-type {
    font-size: 1.0625em;
    line-height: 1.7;
  }

  /* Drop cap - elegant, restrained */
  .article-prose > p:first-of-type::first-letter {
    float: left;
    font-family: 'Georgia', serif;
    font-size: 3.25em;
    line-height: 0.85;
    font-weight: 400;
    color: #1a1a1a;
    padding-right: 0.08em;
    margin-top: 0.05em;
    /* Subtle ink-bleed on drop cap */
    text-shadow:
      0 0 1px rgba(0, 0, 0, 0.12),
      0 0 2px rgba(30, 20, 10, 0.06);
  }

  @media (min-width: 640px) {
    .article-prose > p:first-of-type::first-letter {
      font-size: 3.5em;
      padding-right: 0.1em;
    }
  }

  /* --- PARAGRAPHS ---
     Spacing aligned to baseline grid */
  .article-prose p {
    margin-top: 0;
    margin-bottom: 24px;  /* 4 baseline units */
    text-align: left;
    hyphens: auto;
    -webkit-hyphens: auto;
    orphans: 2;
    widows: 2;
  }

  /* Consecutive paragraphs - traditional indent */
  .article-prose p + p {
    text-indent: 1.5em;
    margin-top: -6px;  /* Pull up 1 baseline unit */
  }

  /* Reset indent after non-paragraph elements */
  .article-prose h2 + p,
  .article-prose h3 + p,
  .article-prose h4 + p,
  .article-prose blockquote + p,
  .article-prose ul + p,
  .article-prose ol + p,
  .article-prose pre + p,
  .article-prose hr + p {
    text-indent: 0;
    margin-top: 0;
  }

  /* First paragraph after title - no drop cap indent conflict */
  .article-prose > p:first-of-type + p {
    text-indent: 0;
    margin-top: 0;
  }

  /* --- HEADINGS ---
     Generous space above, tight below (anchored to text)
     Spacing on baseline grid */
  
  .article-prose h2 {
    font-family: 'Georgia', serif;
    font-size: 1.3125rem;  /* 21px */
    font-weight: 400;
    font-style: italic;
    color: #1a1a1a;
    letter-spacing: 0.01em;
    line-height: 1.35;
    
    margin-top: 48px;   /* 8 baseline units */
    margin-bottom: 12px; /* 2 baseline units */
    padding-top: 6px;   /* Optical alignment */
  }

  /* Ink-bleed on H2 (lighter than H1) */
  .article-prose h2 {
    text-shadow:
      0 0 0.4px rgba(0, 0, 0, 0.1),
      0 0 0.8px rgba(30, 20, 10, 0.05);
  }

  .article-prose h3 {
    font-family: 'Georgia', serif;
    font-size: 1.0625rem;  /* 17px */
    font-weight: 600;
    font-style: normal;
    color: #1a1a1a;
    letter-spacing: 0.02em;
    line-height: 1.4;
    
    margin-top: 36px;    /* 6 baseline units */
    margin-bottom: 6px;  /* 1 baseline unit */
  }

  .article-prose h4 {
    font-family: 'Georgia', serif;
    font-size: 1rem;
    font-weight: 600;
    font-style: italic;
    color: #2d2d2d;
    line-height: 1.45;
    
    margin-top: 30px;    /* 5 baseline units */
    margin-bottom: 6px;  /* 1 baseline unit */
  }

  /* First heading has no top margin */
  .article-prose > h2:first-child,
  .article-prose > h3:first-child,
  .article-prose > h4:first-child {
    margin-top: 0;
    padding-top: 0;
  }

  /* --- LINKS ---
     Subtle, scholarly. Underline only. */
  .article-prose a {
    color: inherit;
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 0.15em;
    text-decoration-color: rgba(0, 0, 0, 0.25);
    text-decoration-skip-ink: auto;
  }

  .article-prose a:hover {
    text-decoration-color: rgba(0, 0, 0, 0.5);
  }

  /* --- LISTS ---
     Aligned with text flow, baseline-grid spacing */
  .article-prose ul,
  .article-prose ol {
    margin-top: 12px;    /* 2 baseline units */
    margin-bottom: 24px; /* 4 baseline units */
    padding-left: 1.25em;
  }

  .article-prose li {
    margin-bottom: 6px;  /* 1 baseline unit */
    line-height: inherit;
    padding-left: 0.25em;
  }

  .article-prose li:last-child {
    margin-bottom: 0;
  }

  .article-prose ul {
    list-style-type: disc;
  }

  .article-prose ol {
    list-style-type: decimal;
  }

  .article-prose li::marker {
    color: #888;
  }

  /* Nested lists */
  .article-prose li > ul,
  .article-prose li > ol {
    margin-top: 6px;
    margin-bottom: 6px;
  }

  /* --- BLOCKQUOTES ---
     Indented, italicized, no visual chrome */
  .article-prose blockquote {
    margin: 24px 0;      /* 4 baseline units */
    margin-left: 1.5em;
    margin-right: 0;
    padding: 0;
    border: none;
    font-style: italic;
    color: #3d3d3d;
  }

  .article-prose blockquote p {
    margin-bottom: 12px;
    text-indent: 0;
  }

  .article-prose blockquote p:last-child {
    margin-bottom: 0;
  }

  /* Attribution */
  .article-prose blockquote cite,
  .article-prose blockquote footer {
    display: block;
    margin-top: 12px;
    font-style: normal;
    font-size: 0.9em;
    color: #666;
  }

  .article-prose blockquote cite::before {
    content: "— ";
  }

  /* --- CODE ---
     Minimal styling, baseline-aligned */
  .article-prose code {
    font-family: 'SF Mono', 'Menlo', 'Monaco', monospace;
    font-size: 0.85em;
    background: transparent;
    padding: 0;
    color: #4a4a4a;
    letter-spacing: -0.02em;
  }

  .article-prose pre {
    margin: 30px 0;      /* 5 baseline units */
    padding: 18px 20px;  /* 3 baseline units vertical */
    background: #f6f5f3;
    border-radius: 0;
    overflow-x: auto;
    font-size: 0.8125rem;
    line-height: 1.65;
    color: #333;
  }

  .article-prose pre code {
    font-size: inherit;
    color: inherit;
    letter-spacing: inherit;
  }

  /* --- HORIZONTAL RULE ---
     Typographic section break */
  .article-prose hr {
    border: none;
    margin: 42px 0;      /* 7 baseline units */
    text-align: center;
    height: 24px;
    background: transparent;
  }

  .article-prose hr::before {
    content: "⁂";
    display: block;
    font-size: 1rem;
    color: #bbb;
  }

  /* --- EMPHASIS --- */
  .article-prose em {
    font-style: italic;
  }

  .article-prose strong {
    font-weight: 600;
    color: #1a1a1a;
  }

  .article-prose strong em,
  .article-prose em strong {
    font-weight: 600;
    font-style: italic;
  }

  /* --- IMAGES --- */
  .article-prose img {
    max-width: 100%;
    height: auto;
    margin: 36px auto;   /* 6 baseline units */
    display: block;
  }

  .article-prose figure {
    margin: 36px 0;
  }

  .article-prose figcaption {
    margin-top: 12px;
    font-size: 0.875rem;
    font-style: italic;
    color: #666;
    text-align: center;
  }

  /* --- SMALL CAPS --- */
  .article-prose .small-caps {
    font-variant: small-caps;
    font-feature-settings: "smcp" 1;
    letter-spacing: 0.05em;
  }

  /* --- LAST ELEMENT SPACING ---
     Ensure last content block has proper ending rhythm */
  .article-prose > *:last-child {
    margin-bottom: 0;
  }

  /* ============================================
     ARTICLE ENDING - Finished page feel
     ============================================ */

  .article-ending {
    margin-top: 60px;    /* 10 baseline units */
    padding-top: 36px;   /* 6 baseline units */
    text-align: center;
  }

  /* End mark - the "finis" symbol
     Subtle, literary, not decorative */
  .article-finis {
    display: inline-block;
    font-size: 0.75rem;
    color: #c0bbb4;
    letter-spacing: 0;
    /* Optical centering */
    transform: translateY(-2px);
  }

  @media (min-width: 640px) {
    .article-ending {
      margin-top: 72px;  /* 12 baseline units */
      padding-top: 42px; /* 7 baseline units */
    }
  }
}

/* ============================================
   EDITORIAL TYPOGRAPHY SYSTEM
   Optimized for long-form reading
   ============================================ */

@layer base {
  html {
    font-family: 'Georgia', 'Times New Roman', serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-size: 18px; /* Base size for comfortable reading */
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Better text rendering */
  body {
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern" 1, "liga" 1;
  }

  /* Selection styling */
  ::selection {
    background-color: rgba(217, 119, 6, 0.2);
    color: inherit;
  }
}

/* ============================================
   PROSE STYLES - Editorial Reading Experience
   ============================================ */

@layer components {
  .prose-paper {
    @apply text-stone-800;
    font-size: 1.125rem;      /* 18px - optimal for reading */
    line-height: 1.8;         /* Generous line height */
    letter-spacing: 0.01em;   /* Subtle letter spacing */
  }

  /* --- HEADING HIERARCHY --- */
  
  /* H1: Article title - rarely used in body */
  .prose-paper h1 {
    @apply text-stone-900 font-bold;
    font-size: 2.5rem;        /* 40px */
    line-height: 1.2;
    margin-top: 3rem;
    margin-bottom: 1.5rem;
    letter-spacing: -0.02em;  /* Tighter for large text */
  }

  /* H2: Major sections */
  .prose-paper h2 {
    @apply text-stone-900 font-bold;
    font-size: 1.875rem;      /* 30px */
    line-height: 1.3;
    margin-top: 3rem;
    margin-bottom: 1rem;
    letter-spacing: -0.01em;
  }

  /* H3: Subsections */
  .prose-paper h3 {
    @apply text-stone-900 font-semibold;
    font-size: 1.5rem;        /* 24px */
    line-height: 1.4;
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
  }

  /* H4: Minor headings */
  .prose-paper h4 {
    @apply text-stone-900 font-semibold;
    font-size: 1.25rem;       /* 20px */
    line-height: 1.4;
    margin-top: 2rem;
    margin-bottom: 0.5rem;
  }

  /* --- PARAGRAPHS --- */
  
  .prose-paper p {
    margin-bottom: 1.75rem;   /* Comfortable paragraph spacing */
    text-align: left;
    hyphens: auto;
    word-spacing: 0.05em;
  }

  /* First paragraph after heading - no extra top margin */
  .prose-paper h2 + p,
  .prose-paper h3 + p,
  .prose-paper h4 + p {
    margin-top: 0;
  }

  /* Drop cap for first paragraph (optional - add .drop-cap class) */
  .prose-paper .drop-cap::first-letter {
    @apply text-amber-800 font-bold float-left;
    font-size: 4rem;
    line-height: 0.8;
    padding-right: 0.5rem;
    padding-top: 0.25rem;
  }

  /* --- LINKS --- */
  
  .prose-paper a {
    @apply text-amber-700 transition-colors duration-200;
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 3px;
    text-decoration-color: rgba(180, 83, 9, 0.4);
  }

  .prose-paper a:hover {
    @apply text-amber-800;
    text-decoration-color: rgba(180, 83, 9, 0.8);
  }

  /* --- LISTS --- */
  
  .prose-paper ul,
  .prose-paper ol {
    margin-top: 1.5rem;
    margin-bottom: 1.75rem;
    padding-left: 1.75rem;
  }

  .prose-paper ul {
    list-style-type: disc;
  }

  .prose-paper ol {
    list-style-type: decimal;
  }

  .prose-paper li {
    margin-bottom: 0.75rem;
    line-height: 1.7;
    padding-left: 0.5rem;
  }

  .prose-paper li::marker {
    @apply text-amber-700;
  }

  /* Nested lists */
  .prose-paper ul ul,
  .prose-paper ol ol,
  .prose-paper ul ol,
  .prose-paper ol ul {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  /* --- BLOCKQUOTES --- */
  
  .prose-paper blockquote {
    @apply italic text-stone-600;
    border-left: 4px solid;
    @apply border-amber-600;
    margin: 2rem 0;
    padding: 1rem 0 1rem 1.5rem;
    font-size: 1.1rem;
    line-height: 1.75;
  }

  .prose-paper blockquote p {
    margin-bottom: 0;
  }

  .prose-paper blockquote cite {
    @apply text-stone-500 not-italic block;
    font-size: 0.9rem;
    margin-top: 0.75rem;
  }

  /* --- CODE --- */
  
  .prose-paper code {
    @apply bg-stone-100 text-stone-800 font-mono;
    font-size: 0.875em;
    padding: 0.2em 0.4em;
    border-radius: 4px;
  }

  .prose-paper pre {
    @apply bg-stone-900 text-stone-100 overflow-x-auto;
    margin: 2rem 0;
    padding: 1.25rem 1.5rem;
    border-radius: 8px;
    font-size: 0.9rem;
    line-height: 1.6;
  }

  .prose-paper pre code {
    @apply bg-transparent p-0 text-stone-100;
    font-size: inherit;
  }

  /* --- IMAGES & FIGURES --- */
  
  .prose-paper img {
    @apply rounded-lg mx-auto;
    margin: 2.5rem auto;
    max-width: 100%;
    height: auto;
  }

  .prose-paper figure {
    margin: 2.5rem 0;
  }

  .prose-paper figcaption {
    @apply text-stone-500 text-center;
    font-size: 0.9rem;
    margin-top: 0.75rem;
    font-style: italic;
  }

  /* --- HORIZONTAL RULES --- */
  
  .prose-paper hr {
    @apply border-stone-300;
    margin: 3rem auto;
    width: 40%;
    border-width: 1px;
  }

  /* --- EMPHASIS & STRONG --- */
  
  .prose-paper strong {
    @apply text-stone-900 font-semibold;
  }

  .prose-paper em {
    font-style: italic;
  }

  /* --- TABLES --- */
  
  .prose-paper table {
    @apply w-full border-collapse;
    margin: 2rem 0;
    font-size: 0.95rem;
  }

  .prose-paper th {
    @apply text-left text-stone-900 font-semibold border-b-2 border-stone-300;
    padding: 0.75rem 1rem;
  }

  .prose-paper td {
    @apply border-b border-stone-200;
    padding: 0.75rem 1rem;
  }

  .prose-paper tr:last-child td {
    border-bottom: none;
  }

  /* --- SMALL TEXT & ASIDES --- */
  
  .prose-paper small {
    @apply text-stone-500;
    font-size: 0.875rem;
  }

  .prose-paper aside {
    @apply bg-stone-50 text-stone-600 border-l-4 border-stone-300;
    padding: 1rem 1.5rem;
    margin: 2rem 0;
    font-size: 0.95rem;
  }

  /* --- RESPONSIVE ADJUSTMENTS --- */
  
  @media (max-width: 640px) {
    .prose-paper {
      font-size: 1.0625rem;   /* Slightly smaller on mobile */
      line-height: 1.75;
    }

    .prose-paper h1 {
      font-size: 2rem;
    }

    .prose-paper h2 {
      font-size: 1.5rem;
      margin-top: 2.5rem;
    }

    .prose-paper h3 {
      font-size: 1.25rem;
      margin-top: 2rem;
    }

    .prose-paper blockquote {
      padding-left: 1rem;
    }
  }
}

/* ==========================================================================
   TABLE OF CONTENTS
   Like a book margin note - calm, editorial, minimalist
   ========================================================================== */

@layer components {
  /* --- MOBILE TOC --- */
  .toc-mobile {
    display: block;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--paper-lines);
  }

  .toc-mobile-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1rem;
    width: 100%;
    background: linear-gradient(
      to bottom,
      rgba(255, 253, 250, 0.9),
      rgba(252, 250, 245, 0.9)
    );
    border: 1px solid var(--paper-lines);
    border-radius: 6px;
    font-family: var(--font-serif);
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--paper-text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .toc-mobile-toggle:hover {
    border-color: var(--paper-text-muted);
    color: var(--paper-text);
  }

  .toc-mobile-label {
    flex: 1;
    text-align: left;
  }

  .toc-mobile-icon {
    transition: transform 0.2s ease;
  }

  .toc-mobile-icon-open {
    transform: rotate(180deg);
  }

  .toc-mobile-list {
    list-style: none;
    margin: 0.75rem 0 0 0;
    padding: 0;
  }

  .toc-mobile-item {
    margin: 0;
  }

  .toc-mobile-link {
    display: block;
    width: 100%;
    padding: 0.5rem 1rem;
    background: none;
    border: none;
    text-align: left;
    font-family: var(--font-sans);
    font-size: 0.875rem;
    color: var(--paper-text-secondary);
    cursor: pointer;
    transition: color 0.15s ease;
  }

  .toc-mobile-link:hover {
    color: var(--paper-text);
  }

  .toc-mobile-link-nested {
    padding-left: 1.75rem;
    font-size: 0.8125rem;
  }

  .toc-mobile-link-deep {
    padding-left: 2.5rem;
    font-size: 0.75rem;
    color: var(--paper-text-muted);
  }

  .toc-mobile-link-active {
    color: var(--paper-accent);
    font-weight: 500;
  }

  /* --- DESKTOP TOC --- */
  .toc-desktop {
    display: none;
  }

  /* Hide mobile on larger screens, show desktop */
  @media (min-width: 1200px) {
    .toc-mobile {
      display: none;
    }

    .toc-desktop {
      display: block;
      position: fixed;
      top: 140px;
      /* Position to the right of the article */
      left: calc(50% + 380px);
      width: 200px;
      max-height: calc(100vh - 200px);
      overflow-y: auto;
      padding-right: 1rem;
    }

    .toc-desktop-label {
      font-family: var(--font-sans);
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--paper-text-muted);
      margin-bottom: 0.75rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--paper-lines);
    }

    .toc-desktop-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .toc-desktop-item {
      margin: 0;
    }

    .toc-desktop-link {
      display: block;
      width: 100%;
      padding: 0.375rem 0;
      padding-left: 0.75rem;
      background: none;
      border: none;
      border-left: 2px solid transparent;
      text-align: left;
      font-family: var(--font-sans);
      font-size: 0.8125rem;
      line-height: 1.4;
      color: var(--paper-text-muted);
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .toc-desktop-link:hover {
      color: var(--paper-text-secondary);
      border-left-color: var(--paper-lines);
    }

    .toc-desktop-link-nested {
      padding-left: 1.25rem;
      font-size: 0.75rem;
    }

    .toc-desktop-link-deep {
      padding-left: 1.75rem;
      font-size: 0.6875rem;
    }

    .toc-desktop-link-active {
      color: var(--paper-text);
      border-left-color: var(--paper-accent);
      font-weight: 500;
    }

    /* Custom scrollbar for TOC */
    .toc-desktop::-webkit-scrollbar {
      width: 4px;
    }

    .toc-desktop::-webkit-scrollbar-track {
      background: transparent;
    }

    .toc-desktop::-webkit-scrollbar-thumb {
      background-color: var(--paper-lines);
      border-radius: 2px;
    }
  }

  /* Smooth scroll target offset for sticky header */
  .prose-paper h2[id],
  .prose-paper h3[id],
  .prose-paper h4[id] {
    scroll-margin-top: 100px;
  }
}
